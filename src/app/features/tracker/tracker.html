<app-header></app-header>
<div class="tracker-container" style="padding: 20px; max-width: 800px; margin: 0 auto;">
  <h1 style="margin-bottom: 30px;">Трекер привычек</h1>

  <div style="margin-bottom: 25px;">
    <button mat-flat-button [matMenuTriggerFor]="menu" 
            style="border-radius: 30px; padding: 0 25px; height: 45px; background: #1976d2; color: white;">
      <mat-icon>list</mat-icon>
      {{ selectedHabitName || 'Выберите привычку' }}
    </button>
    
    <mat-menu #menu="matMenu">
      <button mat-menu-item *ngFor="let h of habits" (click)="selectHabit(h)">
        <div style="display: flex; align-items: center; gap: 10px;">
          <div [style.background]="h.color" style="width: 10px; height: 10px; border-radius: 50%;"></div>
          {{h.name}}
        </div>
      </button>
    </mat-menu>
  </div>

  <div class="calendar-card" 
       [style.background]="(isDark$ | async) ? '#2c2c2c' : 'white'" 
       style="padding: 30px; border-radius: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
    
    <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px; text-align: center; margin-bottom: 20px; font-weight: bold; color: #1976d2;">
      <div>Пн</div><div>Вт</div><div>Ср</div><div>Чт</div><div>Пт</div><div>Сб</div><div>Вс</div>
    </div>
    
    <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px;">
      <div *ngFor="let empty of emptyDays"></div>
      
      <div *ngFor="let day of monthDays" 
           (click)="toggleDay(day)"
           [style.background]="isDone(day) ? selectedHabitColor : ((isDark$ | async) ? '#3d3d3d' : '#f0f0f0')"
           [style.color]="isDone(day) ? 'white' : 'inherit'"
           style="aspect-ratio: 1; display: flex; align-items: center; justify-content: center; border-radius: 12px; cursor: pointer; font-weight: 600; transition: transform 0.2s;">
        {{day}}
      </div>
    </div>
  </div>
</div>